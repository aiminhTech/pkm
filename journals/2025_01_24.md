## Goals & Work
	- DONE Arbeitsjournal Donnerstag (23.01) ergänzen
	- [[LRN-267: Refactoring PAV Backend]] #[[LRN-266: Refactoring Process Archive Viewer]]]]
		- **Refactoring Modelle und in das Programm intergrieren**
			- Nachdem ich die neuen **Effect Schema-Modelle** erstellt hatte, testete ich ihre Integration ins Backend.
			- Ursprünglich hatte ich die Modelle mit `Schema.Struct` definiert, doch bei der Verwendung von `.make()` verlor ich die Typinformationen.
			- Nach meiner Recherche stellte ich fest, dass `Schema.Struct` zwar eine praktische Möglichkeit bietet, Schemas zu definieren, aber die Typen nicht automatisch erhält, da `make()` eine Struktur generiert, die zur Laufzeit geprüft wird, aber nicht mit statischen TypeScript-Typen verknüpft bleibt.
			- Um dieses Problem zu umgehen, habe ich die Modelle stattdessen als Klassen implementiert, da diese eine bessere Typensicherheit bieten und sich leichter mit Effect kombinieren lassen.
		- **Migration der API- und Fetch-Funktionen zu Effect TS**
			- Ich habe die bisherigen API- und Fetch-Funktionen, die Daten von S3 und Elasticsearch abrufen, von einer normale Implementierung mit `fetch` und `Zod` auf **Effect TS** umgestellt. Zuvor wurden die Daten mit `fetch()` abgerufen und mit `Zod` validiert, aber nun erfolgt die Datenvalidierung mit Effect Schema* wodurch der gesamte Prozess funktionaler und robuster wird.
			- Mit **Effect Schema** musste ich eigene Fehler-Typ erstellen und sicherstellen, dass Fehler korrekt behandelt und weitergegeben werden.
			- Dafür habe ich `decodeEitherOrUnknown` verwendet, um die Daten zu validieren. Falls ein Fehler auftritt, gebe ich ein `Effect.fail()` zurück. Falls die Validierung erfolgreich ist, werden die verarbeiteten Daten als `Effect.succeed()` zurückgegeben.
		-
- ## Meeting
- ## Duties
- ## Learn
- ## Reflection
	- Am Ende des Arbeitstages habe ich diesen Teil erfolgreich abgeschlossen. Das Backend funktioniert wieder problemlos, und ich konnte die **API über ThunderClient testen**. Auch die Kommunikation mit dem Frontend läuft weiterhin ohne Fehler.
	- Allerdings hat mich etwas verwundert: Obwohl ich die Antwortstruktur im Backend geändert habe, scheint das Frontend weiterhin problemlos zu funktionieren. Ich hatte erwartet, dass es Anpassungen benötigt, doch es gab keine unmittelbaren Fehler.
	- Ein potenzielles Problem besteht darin, dass beim Parsen der S3-Daten im Fehlerfall ein `UnsupportedJson`-Typ zurückgegeben wird. Momentan wird dieses Verhalten im Frontend noch nicht behandelt, sodass unklar ist, ob dort ein Fehler auftreten könnte oder ob die API-Antwort bereits abgefangen wird.
	- Ich werde das genauer analysieren, sobald ich mit der Frontend-Implementierung beginne.