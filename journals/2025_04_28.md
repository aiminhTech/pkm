## Goals & Work
	- DONE [[Monday Routine]] erledigen
	- DONE  Arbeitsjournal Donnerstag 25.04 ergänzen
	- [[LRN-276: Data Delivery Explorer]]
		- **Deployment auf Produktion**
			- Heute habe ich eine Pull Request auf den `master`-Branch gemacht, damit Mike meinen Code reviewen kann. Ziel war, dass ich nach dem Review auch auf Produktion deployen kann.
			- Mike hat beim Review ein paar Fehler und Verbesserungsvorschläge gefunden, die ich direkt korrigiert habe.
				- **Dockerfile Backend**
					- Das Dockerfile musste ich anpassen, weil unser Backend mit Bun geschrieben ist und nicht wie bei User 1993 mit Deno. Deshalb habe ich die alten Einstellungen für den falschen User entfernt (z. B. `USER 1993:0`) und stattdessen alles auf User 1000 umgestellt.
					- Ich habe auch den Pfad von `/backend` auf `/app` geändert und die Berechtigungen entsprechend gesetzt.
				- **Search Checkboxes**
					- Bei den Search-Checkboxen hatte ich einen kleinen Typo bei der SPC-Checkbox, wodurch man sie nicht auswählen konnte – das habe ich gefixt.
					- Ausserdem hat bei der Checkbox für "Publication Date" das Label gefehlt, dadurch konnte man sie nur treffen, wenn man genau auf die Checkbox klickt – das ist jetzt auch korrigiert.
				- **Quota Table**
					- Im Quota-Table wurde bisher nur die Anzahl verbleibender Stunden angezeigt, z. B. 12h, auch wenn eigentlich 12h 45m übrig waren. Ich habe deshalb die Funktion, die das Zeitformat umwandelt, so angepasst, dass auch Minuten angezeigt werden. Dazu habe ich noch eine kleine Hilfsfunktion geschrieben, die die Stunden aus dem ISO-Format extrahieren kann, wenn man nur das braucht.
		- [[LRN-279: Erweiterung TMB - POST2GET]]
			- Heute habe ich weiter an der TMB-Erweiterung an der POST2GET-Funktion gearbeitet. Dabei bin ich auf das Problem gestossen, dass ich mit `window.open()` keine neue Browser-Tab öffnen konnte, um die Response vom Backend über eine `blob:`-URL anzuzeigen. Der Grund ist, dass das Backend mit Deno Fresh läuft und Deno Fresh ist serverseitig, kein klassischer Browser, wodurch `window.open()` dort nicht funktioniert.
			- Nachdem ich das Problem mit Mike angeschaut habe, hat er mir einen hilfreichen Hinweis gegeben. Ich habe zwei Möglichkeiten:
				- 1. Eine API-Route in Deno Fresh definieren und in einer Island eine HTML-Form anzeigen, die per `POST` an diese API sendet. Das `target="_blank"` der Form sorgt dann dafür, dass die Antwort in einem neuen Tab geöffnet wird.
				- 2. Alternativ könnte man in der Island auch direkt mit `window.open(blobUrl)` arbeiten, weil Islands clientseitig gerendert werden – also im Browser laufen.
			- Ich habe zuerst die Variante mit dem Formular (`target="_blank"`) ausprobiert. Sie hat grundsätzlich funktioniert – aber wenn der Request fehlschlägt (z. B. wegen falscher URL oder wenn man nicht eingeloggt ist), kann man keine Fehlermeldung anzeigen, weil sich der neue Tab öffnet, ohne Rückmeldung an die ursprüngliche Seite zu geben.
			- Deshalb habe ich mich für die zweite Variante entschieden: Ich zeige das Formular direkt in der Island und verwende `window.open()` mit dem `blobUrl`. Damit kann ich sowohl die Datei im neuen Tab anzeigen als auch Fehler direkt in der ursprünglichen Ansicht anzeigen.
			- Nachdem alles fertig war, habe ich auf die Entwicklungsumgebung deployed, damit Mike testen und mir Feedback geben kann.
- ## Meeting
	- **ITA Meeting**
- ## Dutie
- ## Learn
- ## Reflection
	- **Deployment auf Produktion**
		- Mir fehlt aktuell noch die Berechtigung auf das Git-Repository, um Änderungen direkt auf den `master`-Branch zu mergen.
		- Ausserdem hat Christian bisher keinen Build-Job auf Jenkins für mich eingerichtet. Daher musste ich nach jedem Commit auf den `dev`-Branch manuell den entsprechenden Ansible-Befehl im `ansible-app`-Projekt ausführen, um das Deployment nach OpenShift zu aktualisieren.
		- Ich habe Christian bereits geschrieben, um diese beiden Probleme zu lösen. Abgesehen davon ist das Deployment mittels Ansible bereits nahezu abgeschlossen.